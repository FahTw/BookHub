<header class="bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm w-full">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 py-4 lg:py-0 lg:h-16 w-full">
      
      <!-- Logo and Navigation -->
      <div class="flex items-center justify-between w-full lg:w-auto">
        <div class="flex items-center gap-4 lg:gap-8">
          <a href="/" class="text-2xl font-bold text-orange-600 hover:text-orange-700 transition-colors whitespace-nowrap">
            BookHub
          </a>
          <nav class="hidden sm:block">
            <a href="#" class="text-gray-700 hover:text-gray-900 font-medium">หมวดหมู่หนังสือ</a>
          </nav>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="flex-1 max-w-md lg:max-w-2xl lg:mx-8 w-full">
        <div class="relative w-full">
          <input type="search" placeholder="ค้นหาหนังสือ..."
            class="w-full px-4 py-2 pl-12 border-2 border-gray-300 rounded-full focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-100 transition-all" />
          <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" fill="none"
            stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
      </div>

      <!-- User Actions -->
      <div class="flex items-center justify-end gap-4 lg:gap-6 w-full lg:w-auto">

        {% if user.is_authenticated %}
          <!-- ถ้าล็อกอินแล้ว -->
          <a href="/cart" class="relative p-2 text-gray-700 hover:text-orange-600 transition-colors">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
            </svg>
            <span class="absolute -top-1 -right-1 bg-orange-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">1</span>
          </a>

          <!-- เมนูผู้ใช้ -->
          <div class="dropdown relative">
            <button onclick="myToggle()" class="p-2 text-gray-700 hover:text-orange-600 transition-colors">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </button>
            <div id="user-menu"
              class="hidden flex flex-col absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg py-2">
              <a href="/profile" class="px-4 py-2 hover:bg-gray-100">Profile</a>
              <a href="{% url 'logout' %}" class="px-4 py-2 hover:bg-gray-100">Logout</a>
            </div>
          </div>

        {% else %}
          <!-- ถ้ายังไม่ล็อกอิน -->
          <div class="flex items-center gap-4">
            <a href="{% url 'login' %}" class="bg-orange-600 text-white px-4 py-2 rounded-full hover:bg-orange-700 transition">เข้าสู่ระบบ</a>
          </div>
        {% endif %}
      </div>

    </div>
  </div>
</header>

<script>
  function myToggle() {
    const menu = document.getElementById("user-menu");
    menu.classList.toggle("hidden");
  }
</script>
